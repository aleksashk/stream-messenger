# StreamMessenger

StreamMessenger — это сервис для отправки текстовых сообщений. В текущей версии реализована отправка сообщений по Email, с возможностью дальнейшего расширения на другие каналы (SMS, мессенджеры и соцсети). Отправка сообщений осуществляется параллельно в несколько потоков.

## Функциональность

- Создание сообщений.
- Обновление статуса сообщений.
- Получение информации о сообщении.
- Получение истории статусов сообщения.

## Стек технологий

- Java 17
- Spring Boot 3.3.2
- Spring Data JPA
- PostgreSQL
- Liquibase
- Maven

## Установка и настройка

### 1. Клонирование репозитория

Клонируйте репозиторий проекта на свой локальный компьютер:

```bash
git clone https://github.com/aleksashk/stream-messenger.git
cd stream-messenger

Для работы проекта необходима база данных PostgreSQL. Убедитесь, что PostgreSQL установлен и запущен на вашем компьютере.

Создайте новую базу данных:
        CREATE DATABASE streammessenger;

Настройте доступ к базе данных, добавив учетные данные в файл application.properties:
        spring.datasource.url=jdbc:postgresql://localhost:5432/streammessenger
        spring.datasource.username=root
        spring.datasource.password=1234
        spring.jpa.hibernate.ddl-auto=update
        spring.liquibase.change-log=classpath:db/changelog/db.changelog-master.xml

Для сборки и запуска проекта вам потребуется Maven.

Сборка проекта
Выполните команду для сборки проекта:
        mvn clean install

Запуск проекта
Запустите проект с помощью команды:
        mvn spring-boot:run

Приложение будет доступно по адресу: http://localhost:8080

Параллельная отправка сообщений
Все сообщения отправляются параллельно в несколько потоков, что позволяет обрабатывать большое количество сообщений одновременно.

Структурный паттерн проектирования — Декоратор
Классы, реализующие логику работы с сообщениями, используют базовый интерфейс и паттерн проектирования Декоратор. Это позволяет легко расширять функциональность сервиса для поддержки новых типов сообщений (SMS, мессенджеры и т.д.).

API Эндпоинты
Создание нового сообщения
URL: /api/messages
Метод: POST
Тело запроса:
        {
          "content": "Your message content",
          "recipient": "example@example.com",
          "messageType": "EMAIL"
        }

Ответ: Возвращает созданное сообщение.

Получение сообщения по ID
URL: /api/messages/{id}
Метод: GET
Ответ: Возвращает сообщение с указанным ID.

Получение всех сообщений
URL: /api/messages
Метод: GET
Ответ: Возвращает список всех сообщений.

Обновление статуса сообщения
URL: /api/messages/{id}/status
Метод: PUT
Параметры запроса: status (CREATED, SENT, FAILED)
Ответ: Возвращает обновленный статус.

Получение всех статусов сообщения
URL: /api/messages/{id}/statuses
Метод: GET
Ответ: Возвращает список всех статусов для указанного сообщения.

Миграции базы данных
Миграции базы данных управляются с помощью Liquibase. Файлы миграций находятся в директории src/main/resources/db/changelog.

При запуске приложения, Liquibase автоматически применит все необходимые миграции к базе данных.

Лицензия
Этот проект лицензирован под MIT License.

Авторы
Александр Филимонов - aleksashk
